{% extends 'base.html' %}
{% block title %}Nova Comanda{% endblock %}

{% block content %}
<div class="mt-4">

    {# ── Alerta de limite por servo ── #}
    {% if erro_servo %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {{ erro_servo }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    {% endif %}

    <form method="post">
        {% csrf_token %}

        <div class="mb-3">
            <label for="id_nome" class="form-label">Nome</label>
            <input type="text" name="nome" class="form-control" id="id_nome"
                   placeholder="Digite seu nome" value="{{ form_data.nome|default_if_none:'' }}" required>
        </div>

        <div class="mb-3">
            <label for="id_servo" class="form-label">Servo</label>
<select name="servo" id="id_servo" class="form-select" required>
    <option value="" disabled selected>Comprou de qual servo?</option>
    {% for s in servos %}
        <option value="{{ s }}" {% if form_data.servo == s %}selected{% endif %}>{{ s }}</option>
    {% endfor %}
</select>
        </div>

        <div class="mb-3">
            <label for="id_pedido" class="form-label">Pedido</label>
            <select name="pedido" id="id_pedido" class="form-select" required>
                <option value="" disabled {% if not form_data %}selected{% endif %}>Selecione o pedido</option>
                <option value="Hamburguer + Suco" {% if form_data.pedido == "Hamburguer + Suco" %}selected{% endif %}>
                    Hamburguer + Suco&nbsp;–&nbsp;R$ 20,00
                </option>
                <option value="Hamburguer + Refri" {% if form_data.pedido == "Hamburguer + Refri" %}selected{% endif %}>
                    Hamburguer + Refri&nbsp;–&nbsp;R$ 21,00
                </option>
            </select>
        </div>

        <div class="mb-3">
            <label for="id_pagamento" class="form-label">Pagamento</label>
            <select name="pagamento" id="id_pagamento" class="form-select" required>
                <option value="" disabled {% if not form_data %}selected{% endif %}>Selecione o pagamento</option>
                <option value="pix"    {% if form_data.pagamento == "pix" %}selected{% endif %}>Pix</option>
                <option value="cartao" {% if form_data.pagamento == "cartao" %}selected{% endif %}>Cartão</option>
            </select>
        </div>

        <div class="d-grid">
            <button type="submit" class="btn btn-danger">Finalizar</button>
        </div>
    </form>
</div>
{% endblock %}
